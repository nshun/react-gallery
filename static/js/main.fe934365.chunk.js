(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{126:function(e,t,n){},127:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(42),c=n.n(o),r=(n(71),n(2)),l=n(3),s=n(5),u=n(4),d=n(6),h=n(60),g=n.n(h),m=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("header",{className:"App-header"},i.a.createElement("img",{src:g.a,className:"App-logo",alt:"logo"}),i.a.createElement("a",{className:"App-Name",href:"#top"},"Kasane"))}}]),t}(a.Component),p=n(7),f=n(129),b=n(130),v=n(19),w=n.n(v),j=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"onClick",value:function(){this.props.toggleImage(this.props.id||"")}},{key:"render",value:function(){var e=this,t=this.props.detail;return t.url?i.a.createElement("div",{className:"popup"},i.a.createElement("div",{className:"popup-header"},i.a.createElement("h2",null,t.description)),i.a.createElement("div",{className:"popup-inner"},i.a.createElement("img",{className:"detail-image",alt:t.description||"",title:t.title||"",src:t.url||w.a,width:t.width||"",height:t.height||"",onClick:function(){return e.onClick()},onError:function(e){e.target.onerror="",e.target.src=w.a}})),i.a.createElement("div",{className:"popup-footer"},i.a.createElement(f.a,{url:window.location.href,title:"".concat(t.description,' "').concat(t.title,'"')},i.a.createElement(b.a,{size:32,round:!0})))):i.a.createElement("div",{className:"hidden"})}}]),t}(a.Component),k=n(43),I=n.n(k),O=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"onClick",value:function(){this.props.click(this.props.detail.id)}},{key:"render",value:function(){var e=this,t=this.props.detail;return i.a.createElement("img",{className:"list-image",tabIndex:"0",alt:t.description||"",title:t.title||"",src:t.url||w.a,width:t.width||"",height:t.height||"",onClick:function(){return e.onClick()},onError:function(e){e.target.onerror="",e.target.src=w.a}})}}]),t}(a.Component),y=!1,E=function(e){function t(e){var n;Object(r.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleScroll=function(e){var t=document.body.getBoundingClientRect();document.getElementById("footer").getBoundingClientRect().top-t.top<window.scrollY+3*window.innerHeight&&n.listImagesApi()};var a=new URLSearchParams(window.location.search);return n.state={limit:36,offset:0,images:[],clickedImageId:a.get("id")||""},n.listImagesApi=n.listImagesApi.bind(Object(p.a)(Object(p.a)(n))),n.toggleImage=n.props.toggleImage.bind(Object(p.a)(Object(p.a)(n))),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"listImagesApi",value:function(){var e=this;y||(y=!0,fetch("https://wfc-2019.firebaseapp.com/images?limit=".concat(this.state.limit,"&offset=").concat(this.state.offset),{method:"GET"}).then(function(e){return e.json()}).then(function(t){if(t.ok){var n=t.data.images;e.setState({offset:e.state.offset+e.state.limit,images:e.state.images.concat(n)}),y=!1}else setInterval(e.listImagesApi,1e3)}).catch(function(t){setInterval(e.listImagesApi,1e3)}))}},{key:"componentWillMount",value:function(){this.listImagesApi()}},{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this,t=this.state.images;return 0===t.length?i.a.createElement("h1",null," Loading... "):t.map(function(t){return i.a.createElement(I.a,{key:t.url,height:"25vw",width:"25vw",once:!0,offset:500},i.a.createElement(O,{detail:t,click:e.toggleImage})," ")})}}]),t}(a.Component),A=function(e){function t(e){var n;Object(r.a)(this,t),n=Object(s.a)(this,Object(u.a)(t).call(this,e));var a=new URLSearchParams(window.location.search);return n.state={detail:{},clickedImageId:a.get("id")||""},n.toggleImage=n.toggleImage.bind(Object(p.a)(Object(p.a)(n))),n.getImageApi=n.getImageApi.bind(Object(p.a)(Object(p.a)(n))),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"getImageApi",value:function(e){var t=this;e&&""!==e&&fetch("https://wfc-2019.firebaseapp.com/image/".concat(e),{method:"GET"}).then(function(e){return e.json()}).then(function(n){n.ok?t.setState({detail:n.data}):setInterval(t.getImageApi(e),1e3)})}},{key:"toggleImage",value:function(e){if(this.getImageApi(e),window.history.pushState){var t=window.location.protocol+"//"+window.location.host+window.location.pathname;""!==e&&this.state.clickedImageId!==e&&(t+="?id=".concat(e)),window.history.pushState({path:t},"",t)}""===e?this.setState({detail:{},clickedImageId:""}):this.setState({clickedImageId:this.state.clickedImageId===e?"":e})}},{key:"componentWillMount",value:function(){this.getImageApi(this.state.clickedImageId)}},{key:"render",value:function(){return i.a.createElement("div",{className:"App-body"},i.a.createElement(j,{toggleImage:this.toggleImage,detail:this.state.detail}),i.a.createElement(E,{toggleImage:this.toggleImage}))}}]),t}(a.Component),C=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("footer",{id:"footer",className:"App-footer"},i.a.createElement("a",{className:"App-link",href:"#top"},"Go Top"))}}]),t}(a.Component),N=(n(126),function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{id:"top",className:"App"},i.a.createElement(m,null),i.a.createElement(A,null),i.a.createElement(C,null))}}]),t}(a.Component)),S=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function W(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(i.a.createElement(N,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/react-gallery",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/react-gallery","/service-worker.js");S?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):W(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):W(t,e)})}}()},19:function(e,t,n){e.exports=n.p+"static/media/broken-link.dafb506b.svg"},60:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},66:function(e,t,n){e.exports=n(127)},71:function(e,t,n){}},[[66,1,2]]]);
//# sourceMappingURL=main.fe934365.chunk.js.map